{% extends 'base.html' %}
{% block content %}
<h2>Break-Even Dashboard</h2>
<table border="1" class="table-auto w-full">
  <thead>
    <tr>
      <th>Divizija</th>
      <th>Datum</th>
      <th>Prihod</th>
      <th>Profit</th>
      <th>Break-even Q</th>
      <th>Progress</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody id="be-table-body">
    {% for s in snapshots %}
    <tr>
      <td>{{ s.division }}</td>
      <td>{{ s.date }}</td>
      <td>{{ s.revenue }}</td>
      <td>{{ s.profit }}</td>
      <td>{{ s.break_even_qty }}</td>
      <!-- Progress bar cell -->
      <td>
        <div class="w-32 bg-gray-200 rounded overflow-hidden">
          <div class="h-4 {% if s.percent >= 100 %}bg-green-500{% elif s.percent >= 50 %}bg-yellow-400{% else %}bg-red-500{% endif %}" style="width:{{ s.percent }}%"></div>
        </div>
      </td>
      <td class="text-center {% if s.percent >= 100 %}text-green-600{% elif s.percent >= 50 %}text-yellow-600{% else %}text-red-600{% endif %}">{{ s.status|title }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<!-- Remove WebSocket live update for now -->
<style>
/* Tailwind is used for styling */
</style>
{% endblock %}
